function out(e,t){t.end((e.callback||"callback")+"("+JSON.stringify(e)+");")}function saveList(){fs.writeFile("mzd.json",JSON.stringify(list,null,4)),setTimeout(saveList,12e4)}var fs=require("fs"),http=require("http"),url=require("url"),querystring=require("querystring"),list=JSON.parse(fs.readFileSync("mzd.json","utf-8")),trim=function(e){return(e+"").replace(/^\s*(.*?)\s*$/,"$1")};http.createServer(function(e,t){var r=querystring.parse(url.parse(e.url).query);if(t.writeHead(200,{"Content-Type":"application/javascript"}),"/favicon.ico"===e.url.toString()){var s=new Date;s.setFullYear(s.getFullYear()+1),t.writeHead(200,{"Content-Type":"image/x-icon",Expires:s}),t.end("")}else{var i=trim(decodeURIComponent(r.name)),n=trim(decodeURIComponent(r.phone)),l=trim(decodeURIComponent(r.car)),a=trim(decodeURIComponent(r.sheng)),c=trim(decodeURIComponent(r.city)),o=+new Date;r.success=!0,r.call_all_order_list?r.list=list:r.call_list_length?(r.callback="show_order_num",r.length=Object.keys(list).length):i&&n&&l&&a&&c?(r.success=!1,list[n]?r.error="该电话号码已经注册":/^\d{7,11}$/.test(n)?(r.success=!0,list[n]={name:i,car:l,sheng:a,city:c,time:o}):r.error="电话号码需要是7~11位纯数字"):(r.success=!1,r.error="请填写姓名和电话并选择车系以及地区和经销商！"),out(r,t)}}).listen(8974),saveList();